(this["webpackJsonpyrityshaku-app"]=this["webpackJsonpyrityshaku-app"]||[]).push([[0],{161:function(e,t,s){},234:function(e,t,s){},498:function(e,t,s){"use strict";s.r(t);var i=s(2),a=s(0),n=s.n(a),r=s(29),c=s.n(r),o=(s(234),s(24)),l=s(25),d=s(27),h=s(26),j=s(511),u=(s(161),s(68)),b=s(107),p=s.n(b),m=s(505),O=s(506),x=s(504),f=s(85),y=s.n(f),g=(s(235),s(160)),v=s(512),k=s(80),w=s(84),C=s(72),S=s.n(C),D="AIzaSyCLy2_XhZVc6mEwAv3CHrtwsyNorzIhw8s",N=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={isMarkerShown:!1,lat:63.057522,lng:26.207678},i}return Object(l.a)(s,[{key:"getLocation",value:function(){var e=this;S.a.setApiKey(D),S.a.setLanguage("fi"),S.a.setRegion("fi"),S.a.enableDebug(),S.a.fromAddress(this.props.address+this.props.city).then((function(t){var s=t.results[0].geometry.location,i=s.lat,a=s.lng;console.log(i,a),e.setState({lat:parseFloat(i),lng:parseFloat(a)})}),(function(e){console.error(e)}))}},{key:"render",value:function(){return this.getLocation(),Object(i.jsx)(L,{lat:this.state.lat,lng:this.state.lng})}}]),s}(n.a.PureComponent),L=Object(k.compose)(Object(k.withProps)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key="+D+"&v=3.exp&libraries=geometry,drawing,places",loadingElement:Object(i.jsx)("div",{style:{height:"100%"}}),containerElement:Object(i.jsx)("div",{style:{height:"500px"}}),mapElement:Object(i.jsx)("div",{style:{height:"100%"}})}),w.withScriptjs,w.withGoogleMap)((function(e){return Object(i.jsx)(w.GoogleMap,{defaultZoom:6,defaultCenter:{lat:63.057522,lng:26.207678},center:{lat:e.lat,lng:e.lng},zoom:14,children:Object(i.jsx)(w.Marker,{position:{lat:e.lat,lng:e.lng}})})})),I=N,T=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={results:"",loaded:!1,isLoading:!1,updated:!0},i}return Object(l.a)(s,[{key:"componentDidUpdate",value:function(){""!==this.state.results&&this.state.results[0].detailsUri!==this.props.data.detailsUri&&this.setState({updated:!0}),this.state.updated&&this.getCompanyInfo()}},{key:"getCompanyInfo",value:function(){var e=this;this.setState({updated:!1,results:"",isLoading:!0,loaded:!1});var t=this.props.data.detailsUri;void 0!==t&&(t=t.replace("http","https")),console.log(t),p.a.ajax({url:t,cache:!1,dataType:"json"}).done((function(t){e.setState({results:t.results,loaded:!0,isLoading:!1}),console.log("Data Loading Done")})).fail((function(t,s,i){console.log(s+":"+i),e.setState({loaded:!0,isLoading:!1})}))}},{key:"render",value:function(){return this.state.loaded&&void 0!==this.props.data.detailsUri?Object(i.jsxs)(v.a,Object(g.a)(Object(g.a)({},this.props),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(i.jsx)(v.a.Header,{closeButton:!0,children:Object(i.jsx)(v.a.Title,{id:"contained-modal-title-vcenter",children:this.state.results[0].name})}),Object(i.jsxs)(v.a.Body,{children:[Object(i.jsx)(x.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:Object(i.jsxs)("tbody",{children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Y-tunnus"}),Object(i.jsx)("td",{xs:6,children:this.state.results[0].businessId})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{xs:12,md:8,children:"Viimeisin rekister\xf6inti "}),Object(i.jsx)("td",{xs:6,md:4,children:this.state.results[0].registrationDate})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Katuosoite "}),Object(i.jsx)("td",{children:this.state.results[0].addresses[0].street})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Postinumero ja -toimipaikka "}),Object(i.jsxs)("td",{children:[this.state.results[0].addresses[0].postCode," ",this.state.results[0].addresses[0].city]})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Viimeisin rekister\xf6intitoimisto "}),Object(i.jsx)("td",{children:this.state.results[0].registeredOffices[0].registeredOffice})]})]})}),Object(i.jsx)(I,{address:this.state.results[0].addresses[0].street,city:this.state.results[0].addresses[0].city})]}),Object(i.jsx)(v.a.Footer,{children:Object(i.jsx)(m.a,{onClick:this.props.onHide,children:"Sulje"})})]})):""}}]),s}(n.a.Component),H=s(157),M=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(e){var i;return Object(o.a)(this,s),(i=t.call(this,e)).state={results:[],count:"0",loaded:!1,startDate:new Date(Date.now()-864e5),endDate:new Date(Date.now()-864e5),isLoading:!1,modalshow:!1,activeItemData:"",citySearch:"",getCompaniesFailed:!1},i.searchClickHandler=i.searchClickHandler.bind(Object(u.a)(i)),i.getCompanies=i.getCompanies.bind(Object(u.a)(i)),i.handleSetModal=i.handleSetModal.bind(Object(u.a)(i)),i}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return this.state.loaded?Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(T,{show:this.state.modalShow,onHide:function(){return e.setState({modalShow:!1})},data:this.state.activeItemData}),Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("p",{className:"form-p",children:"Anna rekister\xf6intikuulutuksen aikav\xe4li"}),Object(i.jsxs)("div",{className:"row",style:{marginBottom:"20px",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)(y.a,{className:"form",selected:this.state.startDate,onChange:function(t){e.setState({startDate:t})},dateFormat:"yyyy-MM-dd",style:{margin:"10px"}}),Object(i.jsx)(y.a,{className:"form",selected:this.state.endDate,onChange:function(t){e.setState({endDate:t})},dateFormat:"yyyy-MM-dd"})]}),Object(i.jsx)("p",{className:"form-p",children:"Anna kotipaikka"}),Object(i.jsxs)("div",{className:"row",style:{marginBottom:"20px",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)("input",{className:"form",placeholder:"kunnan nimi",onChange:function(t){e.setState({citySearch:t.target.value})}})," "]}),Object(i.jsx)("div",{className:"row",style:{marginBottom:"20px",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:Object(i.jsx)(m.a,{style:{marginLeft:"5px",width:"140px"},variant:"primary",size:"sm",disabled:this.state.isLoading,onClick:this.searchClickHandler,children:this.state.isLoading?Object(i.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Hae yritykset"})})]}),Object(i.jsxs)("p",{children:["Uusia yrityksi\xe4 ",this.state.count," kpl"]}),this.state.count>79?Object(i.jsxs)(O.a,{variant:"warning",children:[Object(i.jsx)(O.a.Heading,{children:"Huom!"}),Object(i.jsxs)("p",{children:["Sait haullesi ",this.state.count," tulosta. Tuloksista n\xe4ytet\xe4\xe4n vain 79 ensimm\xe4ist\xe4!"]})]}):"",this.state.getCompaniesFailed?Object(i.jsxs)(O.a,{variant:"primary",children:[Object(i.jsx)(O.a.Heading,{children:"Oho!"}),Object(i.jsx)("p",{children:"Hakuehdoillasi ei ilmeisesti l\xf6ytynyt yht\xe4\xe4n uutta yrityst\xe4."})]}):"",Object(i.jsxs)(x.a,{striped:!0,bordered:!0,hover:!0,responsive:"sm",size:"sm",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Yrityksen nimi"}),Object(i.jsx)("th",{children:"Kotipaikka"}),Object(i.jsx)("th",{children:"Y-tunnus"}),Object(i.jsx)("th",{children:"Rekister\xf6intitunnus"})]})}),Object(i.jsx)("tbody",{children:this.state.results.map((function(t,s){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{onClick:e.handleSetModal.bind(e,t),style:{textAlign:"left"},children:t.name}),Object(i.jsx)("td",{children:t.registeredOffice}),Object(i.jsx)("td",{children:t.businessId}),Object(i.jsx)("td",{children:t.recordNumber})]},t.businessId)}))})]})]}):Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("p",{className:"form-p",children:"Anna rekister\xf6intikuulutuksen aikav\xe4li"}),Object(i.jsxs)("div",{className:"row",style:{marginBottom:"20px",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)(y.a,{className:"form",selected:this.state.startDate,onChange:function(t){e.setState({startDate:t})},dateFormat:"yyyy-MM-dd",style:{margin:"10px"}}),Object(i.jsx)(y.a,{className:"form",selected:this.state.endDate,onChange:function(t){e.setState({endDate:t})},dateFormat:"yyyy-MM-dd"})]}),Object(i.jsx)("p",{className:"form-p",children:"Anna kotipaikka"}),Object(i.jsxs)("div",{className:"row",style:{marginBottom:"20px",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(i.jsx)("input",{className:"form",placeholder:"kunnan nimi",onChange:function(t){e.setState({citySearch:t.target.value})}})," "]}),Object(i.jsx)("div",{className:"row",style:{marginBottom:"20px",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"},children:Object(i.jsx)(m.a,{style:{marginLeft:"5px",width:"140px"},variant:"primary",size:"sm",disabled:this.state.isLoading,onClick:this.searchClickHandler,children:this.state.isLoading?Object(i.jsx)(H.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}):"Hae yritykset"})})]})}},{key:"handleSetModal",value:function(e){this.setState({modalShow:!0,activeItemData:e}),console.log("key: "+e.detailsUri)}},{key:"searchClickHandler",value:function(){this.setState({results:[],count:"0",loaded:!1,isLoading:!0,getCompaniesFailed:!1}),this.getCompanies()}},{key:"getCompanies",value:function(){var e=this,t=this.state.startDate.toISOString().split("T")[0].toString(),s=this.state.endDate.toISOString().split("T")[0].toString(),i=encodeURIComponent(this.state.citySearch);console.log(t+" - "+s),console.log(i);var a="https://avoindata.prh.fi/tr/v1/publicnotices?totalResults=true&maxResults=1000&registeredOffice="+i+"&noticeRegistrationFrom="+t+"&noticeRegistrationTo="+s+"&noticeRegistrationType=U";p.a.ajax({url:a,cache:!1,dataType:"json"}).done((function(t){e.setState({results:t.results,count:t.totalResults,loaded:!0,isLoading:!1})})).fail((function(t,s,i){console.log(s+":"+i),e.setState({loaded:!0,isLoading:!1,getCompaniesFailed:!0})}))}}]),s}(n.a.Component),A=s(507),B=s(508),F=s(514),U=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(i.jsxs)(A.a,{children:[Object(i.jsx)(B.a,{children:Object(i.jsxs)("p",{children:["Kuulutustiedot sis\xe4lt\xe4v\xe4t tietoa esim. t\xe4n\xe4\xe4n rekister\xf6idyist\xe4 uusista yrityksist\xe4 tai jonkin kunnan alueelle rekister\xf6idyist\xe4 uusista yrityksist\xe4. Tietoja on saatavilla seuraavista yrityksist\xe4 ja yhteis\xf6ist\xe4:",Object(i.jsx)("i",{children:"osakeyhti\xf6, julkinen osakeyhti\xf6, asunto-osakeyhti\xf6, osuuskunta, vakuutusyhti\xf6 ja julkinen vakuutusyhti\xf6. "}),"Aineisto p\xe4ivitet\xe4\xe4n kerran vuorokaudessa"]})}),Object(i.jsx)(B.a,{style:{display:"flex",justifyContent:"center",width:"100%",height:"100%"},children:Object(i.jsx)(F.a,{className:"card-header",style:{width:"18rem",marginBottom:"2rem"},children:Object(i.jsxs)(F.a.Body,{children:[Object(i.jsx)(F.a.Title,{children:"Rekisterinpit\xe4j\xe4"}),Object(i.jsx)(F.a.Subtitle,{className:"mb-2 text-muted",children:" Patentti- ja rekisterihallitus"}),Object(i.jsx)(F.a.Text,{children:"Arkadiankatu 6 A, 00100 Helsinki"}),Object(i.jsx)(F.a.Link,{href:"https://www.prh.fi",children:"prh.fi"}),Object(i.jsx)(F.a.Link,{href:"https://avoindata.prh.fi/",children:"avoindata.prh.fi"})]})})})]})}}]),s}(n.a.Component),R=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("h3",{children:"Tervetuloa l\xf6yt\xf6retkelle uusien yritysten maailmaan!"}),Object(i.jsx)("p",{children:"T\xe4m\xe4 web-sovellus on luotu WEB-ohjelmointi -kurssin harjoitusty\xf6n\xe4. Sovelluksella on mahdollista hakea p\xe4iv\xe4m\xe4\xe4r\xe4n ja rekister\xf6intikunnan perusteella Suomessa helmikuun 2014 j\xe4lkeen perustettuja osakeyhti\xf6it\xe4 ja osuuskuntia."}),Object(i.jsx)("p",{children:"Tiedot haetaan Patentti- ja rekisterihallituksen avoimesta datapalvelusta. "})]})}}]),s}(n.a.Component),z=s(513),P=s(509),W=s(510),E=s(49),K=(s(222),s.p+"static/media/7.7df972eb.jpg"),Y=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return console.log("navbar versio: 17"),Object(i.jsx)(E.a,{children:Object(i.jsxs)(z.a,{bg:"primary",variant:"dark",sticky:"top",children:[Object(i.jsxs)(z.a.Brand,{children:[" ",Object(i.jsxs)(E.b,{to:"/",children:[" ",Object(i.jsx)(P.a,{src:K,style:{width:"40px",height:"40px"},roundedCircle:!0,alt:"NavBar"})]}),"  "]}),Object(i.jsxs)(W.a,{className:"mr-auto",id:"nav",children:[Object(i.jsx)(E.b,{to:"/haku",children:"Yritykset"}),Object(i.jsx)(E.b,{to:"/info",children:"Info"})]})]})})}}]),s}(n.a.Component),V=s(12),G=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){return console.log("versio 19"),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("div",{children:Object(i.jsx)(Y,{})}),Object(i.jsxs)("div",{className:"container",children:[Object(i.jsxs)(j.a,{children:[Object(i.jsx)("h1",{children:"Uusyrityshaku"}),Object(i.jsx)("p",{children:"Hae uusien yritysten tiedot"})]}),Object(i.jsx)("div",{children:Object(i.jsxs)(V.c,{children:[Object(i.jsx)(V.a,{exact:!0,path:"/",children:Object(i.jsx)(R,{})}),Object(i.jsx)(V.a,{path:"/haku",component:M}),Object(i.jsx)(V.a,{path:"/info",children:Object(i.jsx)(U,{})})]})})]})]})}}]),s}(n.a.Component),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var s=e.installing;null!=s&&(s.onstatechange=function(){"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var X=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,515)).then((function(t){var s=t.getCLS,i=t.getFID,a=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),i(e),a(e),n(e),r(e)}))};c.a.render(Object(i.jsx)(E.a,{children:Object(i.jsx)(G,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");J?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(s){var i=s.headers.get("content-type");404===s.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Z(t,e)}))}}(),X()}},[[498,1,2]]]);
//# sourceMappingURL=main.982956b7.chunk.js.map